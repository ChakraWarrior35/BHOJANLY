{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <title>{% block title %}{% endblock title %}</title>
    <meta name="csrf-token" content="{{ csrf_token }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        background: #1c1c1c;
        min-height: 100vh;
      }
      .custom-navbar {
        background: #ee283fff;
        border-radius: 2rem;
        margin: 1.5rem auto 2rem auto;
        max-width: 1400px;
        padding: 0.5rem 2rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .custom-navbar .nav-link, .custom-navbar .navbar-brand {
        color: #fff !important;
        font-size: 1.2rem;
        font-weight: 500;
        margin-right: 1.5rem;
      }
      .custom-navbar .nav-link.active {
        color: #ffffffff !important;
        font-weight: 700;
      }
      .custom-navbar .btn-sign {
        background: #f2f4f5ff;
        color: #090909ff;
        border-radius: 1rem;
        padding: 0.4rem 1.5rem;
        font-weight: 600;
        border: 2px solid #fff;
        transition: background 0.2s;
      }
      .custom-navbar .nav-actions {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        white-space: nowrap;
      }
      .custom-navbar .btn-sign:hover {
        background: #fff;
        color: #ff4081;
        border: 2px solid #ff4081;
      }
      .hero-title {
        color: #fff;
        font-size: 2.8rem;
        font-weight: 700;
        margin-top: 3rem;
        text-align: center;
      }
      .hero-title .highlight {
        color: #32f784ff;
      }
       footer {
    text-align: center;
    padding: 10px;
    background-color: #333;
    text-color: #080000ff;
    color: white;
    margin-top: 20px;
  } 
  h2 {
    color: #ffffffff; 
    text-align: center;
  }
  p {
    color: #100101ff;
    text-align: center;
  }
      .search-bar {
        background: #fff;
        border-radius: 2rem;
        padding: 0.5rem 1rem;
        max-width: 700px;
        margin: 2rem auto 0 auto;
        display: flex;
        align-items: center;
        box-shadow: 0 2px 16px rgba(0,0,0,0.08);
      }
      .search-bar input {
        border: none;
        outline: none;
        box-shadow: none;
        font-size: 1.1rem;
        flex: 1;
        margin-left: 1rem;
        background: transparent;
      }
      .search-bar .input-group-text {
        background: transparent;
        border: none;
        color: #ff4081;
        font-size: 1.3rem;
      }
      @media (max-width: 991px) {
        .custom-navbar {
          flex-direction: column;
          align-items: stretch;
          padding: 1rem;
        }
        .custom-navbar .nav-actions {
          justify-content: flex-end;
          width: 100%;
          margin-top: 0.5rem;
        }
        .custom-navbar .navbar-nav {
          flex-direction: column;
        }
        .hero-title {
          font-size: 2rem;
        }
        .search-bar {
          max-width: 100%;
          margin: 1rem auto 0 auto;
        }
      }
      
    </style>
  </head>
  <body>
    <nav class="custom-navbar">
      <div class="d-flex align-items-right">
        <a class="navbar-brand d-flex align-items-right" href={% url 'index' %}>
          <img src="{% static 'myimage/logo.png' %}" alt="Logo" width="50" height="50" class="me-1">
          <span style="font-size:1.7rem;font-weight:500;color:#7ec6e3;">Bhojanly</span>
        </a>
        <ul class="navbar-nav flex-row ms-2">
          <li class="nav-item">
            <a class="nav-link active" href="/about"><b>About us</b></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/services"><b>Menu</b></a>
          </li>
          <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
           <b> Business</b>
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/resturent"><b>Register your Resturent</b></a></li>
            <li><a class="dropdown-item" href="/delivery"><b>Register as a Delivery Partner</b></a></li>
          </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/contact"><b>Contact us</b></a>
          </li>
        </ul>
      </div>
      {% comment %} add cart button in nav bar {% endcomment %}
       
      <div class="d-flex align-items-center nav-actions">
        <a href="/cart/" class="btn btn-sign requires-login">Cart</a>
        {% if request.session.user_id %}
          <span style="color:#fff; margin-left:6px; margin-right:6px;">Hi, {{ request.session.user_name }}</span>
          <a href="{% url 'logout' %}" class="btn btn-sign">Logout</a>
        {% else %}
          <a href="/login/" class="btn btn-sign">Sign Up/Log In</a>
        {% endif %}
      </div>
    </nav>
    {% if messages %}
      <div style="max-width:1200px;margin:0.5rem auto;padding:0 1rem;">
        {% for message in messages %}
          <div class="alert alert-info" role="alert">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
    {% block body %}{% endblock body %}

    <!-- Login modal (shows when user tries to access cart/add-to-cart while not logged in) -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="background:#111;color:#fff;border-radius:12px;">
          <div class="modal-header">
            <h5 class="modal-title">Please log in</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>You need to log in to continue.</p>
            <form method="post" action="{% url 'login' %}" id="modal-login-form">
              {% csrf_token %}
              <div class="mb-3">
                <input name="username" placeholder="Username / Email / Phone" class="form-control" />
              </div>
              <div class="mb-3">
                <input type="password" name="password" placeholder="Password" class="form-control" />
              </div>
              <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-primary">Log in</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Authentication flag for client-side checks
      window.isAuthenticated = {% if request.session.user_id %}true{% else %}false{% endif %};
      window.showLoginModal = function() {
        var loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
        loginModal.show();
      };

      // Intercept clicks to elements that require login (cart link, etc.)
      document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.requires-login').forEach(function(el) {
          el.addEventListener('click', function(e) {
            if (!window.isAuthenticated) {
              e.preventDefault();
              window.showLoginModal();
            }
          });
        });
      });
    </script>
    <script>
      function getCookie(name) {
        var v = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
        return v ? v.pop() : '';
      }
      var csrftoken = getCookie('csrftoken');
      function fetchWithCSRF(url, opts) {
        opts = opts || {};
        opts.headers = Object.assign({'X-CSRFToken': csrftoken, 'Content-Type': 'application/x-www-form-urlencoded'}, opts.headers || {});
        return fetch(url, opts);
      }
    </script>
    {% comment %} %Footer {% endcomment %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  <footer class="footer-section mt-5" style="background: #1c1c1c; color: #fff; padding: 2.5rem 0 1.5rem 0; font-family: 'Montserrat', Arial, sans-serif;">
  <hr>
      <div class="container">
    <div class="d-flex align-items-center justify-content-center mb-3">
      <img src="{% static 'myimage/logo.png' %}" alt="Logo" width="40" height="40" class="me-2 rounded-3" style="background:#fff; padding:4px;">
      <span style="font-size:1.4rem; font-weight:600; color:#ff4081;">
        <a href="#" style="color:#ff4081; text-decoration:underline;">Bhojanly</a>
      </span>
      <div class="ms-auto d-flex align-items-center gap-2">
        <a href="https://www.facebook.com/share/15vh5hGLA9/" class="d-inline-block" style="background:#fff; border-radius:50%; width:40px; height:40px; display:flex; align-items:center; justify-content:center;">
          <i class="bi bi-facebook" style="color:#ff4081; font-size:1.4rem;"></i>
        </a>
        <a href="https://www.instagram.com/torned._page_/" class="d-inline-block" style="background:#fff; border-radius:50%; width:40px; height:40px; display:flex; align-items:center; justify-content:center;">
          <i class="bi bi-instagram" style="color:#ff4081; font-size:1.4rem;"></i>
        </a>
        <a href="https://www.linkedin.com/in/abhishek-mandal-2045abhi?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" class="d-inline-block" style="background:#fff; border-radius:50%; width:40px; height:40px; display:flex; align-items:center; justify-content:center;">
          <i class="bi bi-linkedin" style="color:#ff4081; font-size:1.4rem;"></i>
        </a>
        <a href="#" class="d-inline-block" style="background:#fff; border-radius:50%; width:40px; height:40px; display:flex; align-items:center; justify-content:center;">
          <i class="bi bi-twitter" style="color:#ff4081; font-size:1.4rem;"></i>
        </a>
      </div>
    </div>
    <div class="mb-3 text-center" style="font-size:1.2rem;">
      <span style="color:#ff4081; font-weight:600;">CATEGORIES:</span>
      <span class="ms-2">Restaurants</span>
      <span class="ms-3">Food Delivery</span>
      <span class="ms-3">Hotel</span>
    </div>
    <div class="text-center" style="font-size:1rem;">
      Name of the Company: Bhojanly<br>
      Address: Barasat, North 24-Paraganas, 700124, West Bengal, India
    </div>
    <div class="text-center" style="font-size:1.1rem; line-height:1.6; max-width:800px; margin:0 auto;">
      Bhojanly is a food delivery platform that connects customers with a variety of local restaurants. We are committed to providing a seamless and enjoyable dining experience.<br>
      Thanks for choosing Bhojanly! Abhishek Mondal Founder of Bhojanly.<br>
      For any query feel free to contact us.<br>
      Phone NO: +91 9531768416<br>
      Email: mandal.abhishek2024@gmail.com<br>
      Follow us: 
      <a href="https://www.linkedin.com/in/abhishek-mandal-2045abhi?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" style="color:#ff4081; font-weight:bold; text-decoration:none;">LinkedIn</a> | 
      <a href="https://www.instagram.com/torned._page_/" style="color:#ff4081; font-weight:bold; text-decoration:none;">Instagram</a> | 
      <a href="https://www.facebook.com/share/15vh5hGLA9/" style="color:#ff4081; font-weight:bold; text-decoration:none;">Facebook</a> | 
      <a href="#" style="color:#ff4081; font-weight:bold; text-decoration:none;">Twitter</a>
      <br>We are always connected with you.
    </div>
  </div>
  <div class="text-center mt-3" style="font-size:0.9rem; color:#bbb;">
    &copy; 2025 Bhojanly. All rights reserved.  
  </div>
</footer>
  </body>
</html>